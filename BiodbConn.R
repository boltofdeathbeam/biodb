if ( ! exists('BiodbConn')) {

	source('biodb-common.R')

	#####################
	# CLASS DECLARATION #
	#####################
	
	BiodbConn <- setRefClass("BiodbConn", fields = list( .debug = "logical" ))

	###############
	# CONSTRUCTOR #
	###############

	BiodbConn$methods( initialize = function(debug = FALSE, ...) {
		.debug <<- debug
	})

	#######################
	# PRINT DEBUG MESSAGE #
	#######################

	BiodbConn$methods( .print.debug.msg = function(msg) {
		if (.self$.debug)
			.print.msg(msg = msg, class = class(.self))
	})

	##########################
	# GET ENTRY CONTENT TYPE #
	##########################

	BiodbConn$methods( getEntryContentType = function() {
		stop("Method getEntryContentType() is not implemented in concrete class.")
	})

	#############
	# GET ENTRY #
	#############

	BiodbConn$methods( getEntry = function(id, drop = TRUE) {
		content <- .self$getEntryContent(id)
		return(.self$createEntry(content, drop = drop))
	})

	#####################
	# GET ENTRY CONTENT #
	#####################
	
	# Download entry content from the public database.
	# type      The entry type.
	# ids       A vector of accession IDs of the entries to get.
	# RETURN    A vector of entry contents. An entry content will be set to NA_character_ if content cannot be found.
	BiodbConn$methods( getEntryContent = function(ids) {
		stop("Method getEntryContent() is not implemented in concrete class.")
	})
	
	#############################
	# CREATE ENTRY FROM CONTENT #
	#############################
	
	# Creates a Compound instance from file content.
	# content       A file content, downloaded from the public database.
	# RETURN        A compound instance.
	BiodbConn$methods( createEntry = function(content, drop = TRUE) {
		stop("Method createEntry() is not implemented in concrete class.")
	})

	#################
	# GET ENTRY IDS #
	#################
	
	# Get a list of IDs of all entries contained in this database.
	BiodbConn$methods( getEntryIds = function(max.results = NA_integer_) {
		stop("Method getEntryIds() is not implemented in concrete class.")
	})

	##################
	# GET NB ENTRIES #
	##################
	
	# Get the number of entries contained in this database.
	BiodbConn$methods( getNbEntries = function() {
		stop("Method getNbEntries() is not implemented in concrete class.")
	})
}
